# CLUSTER_LOGIN

## Description
The `cluster_login` role generates login token for specified Openshift cluster.  

The role is able to work in one of the following states:
* Newly deployed cluster.  
  The cluster will be deployed by the [ocp](ocp.md) role and generate `clusters_details_file`.  
  Clusters info will be fetched from this file to generate the token for the next tasks.
* Existing cluster.  
  If the cluster already exists and was not deployed by us, token could be generated by providing the following environment variables prior playbook execution.
  ```bash
  export OC_CLUSTER_API=<ocp_cluster_api>
  export OC_CLUSTER_USER=<ocp_cluster_user>
  export OC_CLUSTER_PASS=<ocp_cluster_pass>

  ansible-playbook playbook.yml -e @config.yml
  ```

## Role Variables
#### Cluster name
Specify the name of the cluster to generate the login token for.  
If the variable is not defined, the first cluster from the details file will be taken.
```
cluster_name
```

#### Clusters details file
The name of the file that contains details of the clusters.
```
clusters_details_file: clusters_details.yml
```

#### OCP assets dir
Path to directory that contains clusters assets.
```
ocp_assets_dir: logs/ocp_assets
```
